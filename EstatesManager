
package com.mycompany.estatesmanager;
import java.util.Scanner;

class Area {
    protected String name;
    protected int occupants;
    protected boolean[] lights = new boolean[3];

    public Area(String name) {
        this.name = name;
        this.occupants = 0;
        for (int i = 0; i < 3; i++) {
            lights[i] = false;
        }
    }

    public void addOccupants(int n) {
        occupants += n;
    }

    public void removeOccupants(int n) {
        occupants = Math.max(0, occupants - n);
    }

    public void switchLightOn(int num) {
        lights[num - 1] = true;
    }

    public void switchLightOff(int num) {
        lights[num - 1] = false;
    }

    public String getStatus() {
        StringBuilder status = new StringBuilder();
        status.append("Area: ").append(name).append("\n");
        status.append("Occupants: ").append(occupants).append("\n");
        for (int i = 0; i < 3; i++) {
            status.append("Light ").append(i + 1)
                  .append(": ").append(lights[i] ? "ON" : "OFF").append("\n");
        }
        return status.toString();
    }
}

class GymArea extends Area {
    public GymArea() {
        super("Gym Area");
    }
}

class SwimmingArea extends Area {
    public SwimmingArea() {
        super("Swimming Area");
    }
}

public class EstatesManager {
    public static void main(String[] args) {
        Scanner input = new Scanner(System.in);
        GymArea gym = new GymArea();
        SwimmingArea pool = new SwimmingArea();
        Area activeArea = gym;

        boolean running = true;

        System.out.println("=== Speke Apartments Accommodation Control Area ===");

        while (running) {
            System.out.println("\nMain Menu:");
            System.out.println("S â€“ Select active area (G = Gym, P = Swimming)");
            System.out.println("W â€“ Add occupants");
            System.out.println("X â€“ Remove occupants");
            System.out.println("Y â€“ Switch ON a light");
            System.out.println("Z â€“ Switch OFF a light");
            System.out.println("R â€“ Report status");
            System.out.println("Q â€“ Quit program");
            System.out.print("Enter choice: ");
            String choice = input.nextLine().trim().toUpperCase();

            switch (choice) {
                case "S":
                    System.out.print("Select area (G=Gym, P=Swimming): ");
                    String areaChoice = input.nextLine().trim().toUpperCase();
                    if (areaChoice.equals("G")) {
                        activeArea = gym;
                        System.out.println("Active area set to Gym.");
                    } else if (areaChoice.equals("P")) {
                        activeArea = pool;
                        System.out.println("Active area set to Swimming.");
                    } else {
                        System.out.println("Invalid area! Please enter G or P.");
                    }
                    break;

                case "W":
                    int addCount = getValidInt(input, "Enter number of occupants to add: ");
                    activeArea.addOccupants(addCount);
                    System.out.println(addCount + " occupants added to " + activeArea.name + ".");
                    break;

                case "X":
                    int removeCount = getValidInt(input, "Enter number of occupants to remove: ");
                    activeArea.removeOccupants(removeCount);
                    System.out.println(removeCount + " occupants removed from " + activeArea.name + ".");
                    break;

                case "Y":
                    int onLight = getValidLight(input, "Enter light number to switch ON (1-3): ");
                    activeArea.switchLightOn(onLight);
                    System.out.println("Light " + onLight + " switched ON in " + activeArea.name + ".");
                    break;

                case "Z":
                    int offLight = getValidLight(input, "Enter light number to switch OFF (1-3): ");
                    activeArea.switchLightOff(offLight);
                    System.out.println("Light " + offLight + " switched OFF in " + activeArea.name + ".");
                    break;

                case "R":
                    System.out.println("\n--- STATUS REPORT ---");
                    System.out.println(activeArea.getStatus());
                    break;

                case "Q":
                    running = false;
                    System.out.println("Exiting program... Goodbye!");
                    break;

                default:
                    System.out.println("Invalid command! Try again.");
            }
        }

        input.close();
    }

    private static int getValidInt(Scanner input, String message) {
        while (true) {
            System.out.print(message);
            try {
                int n = Integer.parseInt(input.nextLine());
                if (n >= 0) return n;
                else System.out.println("Please enter a non-negative integer.");
            } catch (NumberFormatException e) {
                System.out.println("Invalid input! Enter an integer.");
            }
        }
    }

    private static int getValidLight(Scanner input, String message) {
        while (true) {
            int n = getValidInt(input, message);
            if (n >= 1 && n <= 3) return n;
            else System.out.println("Light number must be 1, 2, or 3.");
        }
    }
}
